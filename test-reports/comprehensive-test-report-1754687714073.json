{
  "startTime": "2025-08-08T21:14:44.026Z",
  "testSuites": [
    {
      "name": "Unit Tests",
      "totalTests": 0,
      "passedTests": 0,
      "failedTests": 1,
      "duration": 0,
      "success": false,
      "error": "Command failed: npm run test:coverage\n\n\u001b[31m⎯⎯⎯⎯⎯⎯\u001b[39m\u001b[1m\u001b[41m Failed Suites 7 \u001b[49m\u001b[22m\u001b[31m⎯⎯⎯⎯⎯⎯⎯\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m tests/performance/web-vitals.spec.ts\u001b[2m [ tests/performance/web-vitals.spec.ts ]\u001b[22m\n\u001b[31m\u001b[1mError\u001b[22m: Playwright Test did not expect test.describe() to be called here.\nMost common reasons include:\n- You are calling test.describe() in a configuration file.\n- You are calling test.describe() in a file that is imported by the configuration file.\n- You have two different versions of @playwright/test. This usually happens\n  when one of the dependencies in your package.json depends on @playwright/test.\u001b[39m\n\u001b[90m \u001b[2m❯\u001b[22m TestTypeImpl._currentSuite node_modules/playwright/lib/common/testType.js:\u001b[2m74:13\u001b[22m\u001b[39m\n\u001b[90m \u001b[2m❯\u001b[22m TestTypeImpl._describe node_modules/playwright/lib/common/testType.js:\u001b[2m114:24\u001b[22m\u001b[39m\n\u001b[90m \u001b[2m❯\u001b[22m Function.describe node_modules/playwright/lib/transform/transform.js:\u001b[2m275:12\u001b[22m\u001b[39m\n\u001b[36m \u001b[2m❯\u001b[22m tests/performance/web-vitals.spec.ts:\u001b[2m4:6\u001b[22m\u001b[39m\n    \u001b[90m  2| \u001b[39m\u001b[35mimport\u001b[39m { mockGeolocation } \u001b[35mfrom\u001b[39m \u001b[32m'../e2e/utils/browser-utils'\u001b[39m\u001b[33m;\u001b[39m\n    \u001b[90m  3| \u001b[39m\n    \u001b[90m  4| \u001b[39mtest\u001b[33m.\u001b[39m\u001b[34mdescribe\u001b[39m(\u001b[32m'Web Vitals Performance Testing'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[90m   | \u001b[39m     \u001b[31m^\u001b[39m\n    \u001b[90m  5| \u001b[39m  test\u001b[33m.\u001b[39m\u001b[34mbeforeEach\u001b[39m(\u001b[35masync\u001b[39m ({ page }) \u001b[33m=>\u001b[39m {\n    \u001b[90m  6| \u001b[39m    \u001b[35mawait\u001b[39m \u001b[34mmockGeolocation\u001b[39m(page)\u001b[33m;\u001b[39m\n\n\u001b[31m\u001b[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[1/20]⎯\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m tests/visual-regression/app-screenshots.spec.ts\u001b[2m [ tests/visual-regression/app-screenshots.spec.ts ]\u001b[22m\n\u001b[31m\u001b[1mError\u001b[22m: Playwright Test did not expect test.describe() to be called here.\nMost common reasons include:\n- You are calling test.describe() in a configuration file.\n- You are calling test.describe() in a file that is imported by the configuration file.\n- You have two different versions of @playwright/test. This usually happens\n  when one of the dependencies in your package.json depends on @playwright/test.\u001b[39m\n\u001b[90m \u001b[2m❯\u001b[22m TestTypeImpl._currentSuite node_modules/playwright/lib/common/testType.js:\u001b[2m74:13\u001b[22m\u001b[39m\n\u001b[90m \u001b[2m❯\u001b[22m TestTypeImpl._describe node_modules/playwright/lib/common/testType.js:\u001b[2m114:24\u001b[22m\u001b[39m\n\u001b[90m \u001b[2m❯\u001b[22m Function.describe node_modules/playwright/lib/transform/transform.js:\u001b[2m275:12\u001b[22m\u001b[39m\n\u001b[36m \u001b[2m❯\u001b[22m tests/visual-regression/app-screenshots.spec.ts:\u001b[2m4:6\u001b[22m\u001b[39m\n    \u001b[90m  2| \u001b[39mimport { mockGeolocation, clearLocalStorage } from '../e2e/utils/brows…\n    \u001b[90m  3| \u001b[39m\n    \u001b[90m  4| \u001b[39mtest\u001b[33m.\u001b[39m\u001b[34mdescribe\u001b[39m(\u001b[32m'Visual Regression Tests'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[90m   | \u001b[39m     \u001b[31m^\u001b[39m\n    \u001b[90m  5| \u001b[39m  test\u001b[33m.\u001b[39m\u001b[34mbeforeEach\u001b[39m(\u001b[35masync\u001b[39m ({ page }) \u001b[33m=>\u001b[39m {\n    \u001b[90m  6| \u001b[39m    \u001b[35mawait\u001b[39m \u001b[34mclearLocalStorage\u001b[39m(page)\u001b[33m;\u001b[39m\n\n\u001b[31m\u001b[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[2/20]⎯\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/test/components/CartPilot.test.tsx\u001b[2m [ src/test/components/CartPilot.test.tsx ]\u001b[22m\n\u001b[31m\u001b[1mReferenceError\u001b[22m: Notification is not defined\u001b[39m\n\u001b[36m \u001b[2m❯\u001b[22m new NotificationService src/services/notificationService.ts:\u001b[2m22:23\u001b[22m\u001b[39m\n    \u001b[90m 20| \u001b[39m\n    \u001b[90m 21| \u001b[39m  \u001b[34mconstructor\u001b[39m() {\n    \u001b[90m 22| \u001b[39m    \u001b[35mthis\u001b[39m\u001b[33m.\u001b[39mpermission \u001b[33m=\u001b[39m \u001b[33mNotification\u001b[39m\u001b[33m.\u001b[39mpermission\n    \u001b[90m   | \u001b[39m                      \u001b[31m^\u001b[39m\n    \u001b[90m 23| \u001b[39m    \u001b[35mthis\u001b[39m\u001b[33m.\u001b[39m\u001b[34minit\u001b[39m()\n    \u001b[90m 24| \u001b[39m  }\n\u001b[90m \u001b[2m❯\u001b[22m src/services/notificationService.ts:\u001b[2m286:36\u001b[22m\u001b[39m\n\u001b[90m \u001b[2m❯\u001b[22m src/components/NotificationSettings.tsx:\u001b[2m6:31\u001b[22m\u001b[39m\n\n\u001b[31m\u001b[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[3/20]⎯\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/test/integration/fullWorkflow.test.tsx\u001b[2m [ src/test/integration/fullWorkflow.test.tsx ]\u001b[22m\n\u001b[31m\u001b[1mReferenceError\u001b[22m: Notification is not defined\u001b[39m\n\u001b[36m \u001b[2m❯\u001b[22m new NotificationService src/services/notificationService.ts:\u001b[2m22:23\u001b[22m\u001b[39m\n    \u001b[90m 20| \u001b[39m\n    \u001b[90m 21| \u001b[39m  \u001b[34mconstructor\u001b[39m() {\n    \u001b[90m 22| \u001b[39m    \u001b[35mthis\u001b[39m\u001b[33m.\u001b[39mpermission \u001b[33m=\u001b[39m \u001b[33mNotification\u001b[39m\u001b[33m.\u001b[39mpermission\n    \u001b[90m   | \u001b[39m                      \u001b[31m^\u001b[39m\n    \u001b[90m 23| \u001b[39m    \u001b[35mthis\u001b[39m\u001b[33m.\u001b[39m\u001b[34minit\u001b[39m()\n    \u001b[90m 24| \u001b[39m  }\n\u001b[90m \u001b[2m❯\u001b[22m src/services/notificationService.ts:\u001b[2m286:36\u001b[22m\u001b[39m\n\u001b[90m \u001b[2m❯\u001b[22m src/components/NotificationSettings.tsx:\u001b[2m6:31\u001b[22m\u001b[39m\n\n\u001b[31m\u001b[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[4/20]⎯\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/test/services/arNavigationService.test.ts\u001b[2m [ src/test/services/arNavigationService.test.ts ]\u001b[22m\n\u001b[31m\u001b[1mReferenceError\u001b[22m: MediaStream is not defined\u001b[39m\n\u001b[36m \u001b[2m❯\u001b[22m src/test/services/arNavigationService.test.ts:\u001b[2m29:49\u001b[22m\u001b[39m\n    \u001b[90m 27| \u001b[39m\u001b[33mObject\u001b[39m\u001b[33m.\u001b[39m\u001b[34mdefineProperty\u001b[39m(navigator\u001b[33m,\u001b[39m \u001b[32m'mediaDevices'\u001b[39m\u001b[33m,\u001b[39m {\n    \u001b[90m 28| \u001b[39m  value\u001b[33m:\u001b[39m {\n    \u001b[90m 29| \u001b[39m    getUserMedia\u001b[33m:\u001b[39m vi\u001b[33m.\u001b[39m\u001b[34mfn\u001b[39m()\u001b[33m.\u001b[39m\u001b[34mmockResolvedValue\u001b[39m(\u001b[35mnew\u001b[39m \u001b[33mMediaStream\u001b[39m())\n    \u001b[90m   | \u001b[39m                                                \u001b[31m^\u001b[39m\n    \u001b[90m 30| \u001b[39m  }\u001b[33m,\u001b[39m\n    \u001b[90m 31| \u001b[39m  writable\u001b[33m:\u001b[39m \u001b[35mtrue\u001b[39m\n\n\u001b[31m\u001b[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[5/20]⎯\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/test/services/notificationService.test.ts\u001b[2m [ src/test/services/notificationService.test.ts ]\u001b[22m\n\u001b[31m\u001b[1mReferenceError\u001b[22m: Notification is not defined\u001b[39m\n\u001b[36m \u001b[2m❯\u001b[22m new NotificationService src/services/notificationService.ts:\u001b[2m22:23\u001b[22m\u001b[39m\n    \u001b[90m 20| \u001b[39m\n    \u001b[90m 21| \u001b[39m  \u001b[34mconstructor\u001b[39m() {\n    \u001b[90m 22| \u001b[39m    \u001b[35mthis\u001b[39m\u001b[33m.\u001b[39mpermission \u001b[33m=\u001b[39m \u001b[33mNotification\u001b[39m\u001b[33m.\u001b[39mpermission\n    \u001b[90m   | \u001b[39m                      \u001b[31m^\u001b[39m\n    \u001b[90m 23| \u001b[39m    \u001b[35mthis\u001b[39m\u001b[33m.\u001b[39m\u001b[34minit\u001b[39m()\n    \u001b[90m 24| \u001b[39m  }\n\u001b[90m \u001b[2m❯\u001b[22m src/services/notificationService.ts:\u001b[2m286:36\u001b[22m\u001b[39m\n\u001b[90m \u001b[2m❯\u001b[22m src/test/services/notificationService.test.ts:\u001b[2m2:31\u001b[22m\u001b[39m\n\n\u001b[31m\u001b[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[6/20]⎯\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/test/services/offlineService.test.ts\u001b[2m [ src/test/services/offlineService.test.ts ]\u001b[22m\n\u001b[31m\u001b[1mError\u001b[22m: [vitest] There was an error when mocking a module. If you are using \"vi.mock\" factory, make sure there are no top level variables inside, since this call is hoisted to top of the file. Read more: https://vitest.dev/api/vi.html#vi-mock\u001b[39m\n\u001b[36m \u001b[2m❯\u001b[22m src/services/offlineService.ts:\u001b[2m1:1\u001b[22m\u001b[39m\n    \u001b[90m  1| \u001b[39m\u001b[90m// Offline Service - Advanced PWA capabilities\u001b[39m\n    \u001b[90m   | \u001b[39m\u001b[31m^\u001b[39m\n    \u001b[90m  2| \u001b[39m\u001b[35mimport\u001b[39m { openDB\u001b[33m,\u001b[39m \u001b[33mDBSchema\u001b[39m\u001b[33m,\u001b[39m \u001b[33mIDBPDatabase\u001b[39m } \u001b[35mfrom\u001b[39m \u001b[32m'idb'\u001b[39m\n    \u001b[90m  3| \u001b[39m\n\n\u001b[31m\u001b[1mCaused by: ReferenceError\u001b[22m: Cannot access 'mockOpenDB' before initialization\u001b[39m\n\u001b[36m \u001b[2m❯\u001b[22m src/test/services/offlineService.test.ts:\u001b[2m29:11\u001b[22m\u001b[39m\n\u001b[90m \u001b[2m❯\u001b[22m src/services/offlineService.ts:\u001b[2m1:1\u001b[22m\u001b[39m\n\n\u001b[31m\u001b[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[7/20]⎯\u001b[22m\u001b[39m\n\n\n\u001b[31m⎯⎯⎯⎯⎯⎯\u001b[39m\u001b[1m\u001b[41m Failed Tests 13 \u001b[49m\u001b[22m\u001b[31m⎯⎯⎯⎯⎯⎯⎯\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/test/services/pwaService.test.ts\u001b[2m > \u001b[22mPWAService\u001b[2m > \u001b[22mService Worker Registration\u001b[2m > \u001b[22mshould register service worker successfully\n\u001b[31m\u001b[1mAssertionError\u001b[22m: expected \"spy\" to be called with arguments: [ '/sw.js', { scope: '/' } ]\u001b[90m\n\nNumber of calls: \u001b[1m0\u001b[22m\n\u001b[31m\u001b[39m\n\u001b[36m \u001b[2m❯\u001b[22m src/test/services/pwaService.test.ts:\u001b[2m90:48\u001b[22m\u001b[39m\n    \u001b[90m 88| \u001b[39m  \u001b[34mdescribe\u001b[39m(\u001b[32m'Service Worker Registration'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[90m 89| \u001b[39m    \u001b[34mit\u001b[39m(\u001b[32m'should register service worker successfully'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[90m 90| \u001b[39m      expect(navigator.serviceWorker.register).toHaveBeenCalledWith('/…\n    \u001b[90m   | \u001b[39m                                               \u001b[31m^\u001b[39m\n    \u001b[90m 91| \u001b[39m        scope\u001b[33m:\u001b[39m \u001b[32m'/'\u001b[39m\n    \u001b[90m 92| \u001b[39m      })\n\n\u001b[31m\u001b[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[8/20]⎯\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/test/services/pwaService.test.ts\u001b[2m > \u001b[22mPWAService\u001b[2m > \u001b[22mService Worker Registration\u001b[2m > \u001b[22mshould handle service worker registration failure\n\u001b[31m\u001b[1mAssertionError\u001b[22m: expected \"spy\" to be called with arguments: [ …(2) ]\u001b[90m\n\nNumber of calls: \u001b[1m0\u001b[22m\n\u001b[31m\u001b[39m\n\u001b[36m \u001b[2m❯\u001b[22m src/test/services/pwaService.test.ts:\u001b[2m102:26\u001b[22m\u001b[39m\n    \u001b[90m100| \u001b[39m      \u001b[35mawait\u001b[39m \u001b[35mnew\u001b[39m \u001b[33mPromise\u001b[39m(resolve \u001b[33m=>\u001b[39m \u001b[34msetTimeout\u001b[39m(resolve\u001b[33m,\u001b[39m \u001b[34m10\u001b[39m))\n    \u001b[90m101| \u001b[39m      \n    \u001b[90m102| \u001b[39m      expect(consoleSpy).toHaveBeenCalledWith('❌ Service Worker regist…\n    \u001b[90m   | \u001b[39m                         \u001b[31m^\u001b[39m\n    \u001b[90m103| \u001b[39m    })\n    \u001b[90m104| \u001b[39m  })\n\n\u001b[31m\u001b[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[9/20]⎯\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/test/services/pwaService.test.ts\u001b[2m > \u001b[22mPWAService\u001b[2m > \u001b[22mPWA Installation\u001b[2m > \u001b[22mshould show install prompt\n\u001b[31m\u001b[1mAssertionError\u001b[22m: expected false to be true // Object.is equality\u001b[39m\n\n\u001b[32m- Expected\u001b[39m\n\u001b[31m+ Received\u001b[39m\n\n\u001b[32m- true\u001b[39m\n\u001b[31m+ false\u001b[39m\n\n\u001b[36m \u001b[2m❯\u001b[22m src/test/services/pwaService.test.ts:\u001b[2m118:22\u001b[22m\u001b[39m\n    \u001b[90m116| \u001b[39m    \u001b[34mit\u001b[39m(\u001b[32m'should show install prompt'\u001b[39m\u001b[33m,\u001b[39m \u001b[35masync\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[90m117| \u001b[39m      \u001b[35mconst\u001b[39m result \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m pwaService\u001b[33m.\u001b[39m\u001b[34mshowInstallPrompt\u001b[39m()\n    \u001b[90m118| \u001b[39m      \u001b[34mexpect\u001b[39m(result)\u001b[33m.\u001b[39m\u001b[34mtoBe\u001b[39m(\u001b[35mtrue\u001b[39m)\n    \u001b[90m   | \u001b[39m                     \u001b[31m^\u001b[39m\n    \u001b[90m119| \u001b[39m    })\n    \u001b[90m120| \u001b[39m\n\n\u001b[31m\u001b[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[10/20]⎯\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/test/services/pwaService.test.ts\u001b[2m > \u001b[22mPWAService\u001b[2m > \u001b[22mApp Updates\u001b[2m > \u001b[22mshould check for updates\n\u001b[31m\u001b[1mAssertionError\u001b[22m: expected \"spy\" to be called at least once\u001b[39m\n\u001b[36m \u001b[2m❯\u001b[22m src/test/services/pwaService.test.ts:\u001b[2m173:52\u001b[22m\u001b[39m\n    \u001b[90m171| \u001b[39m      \u001b[35mconst\u001b[39m result \u001b[33m=\u001b[39m \u001b[35mawait\u001b[39m pwaService\u001b[33m.\u001b[39m\u001b[34mcheckForUpdates\u001b[39m()\n    \u001b[90m172| \u001b[39m      \n    \u001b[90m173| \u001b[39m      \u001b[34mexpect\u001b[39m(mockServiceWorkerRegistration\u001b[33m.\u001b[39mupdate)\u001b[33m.\u001b[39m\u001b[34mtoHaveBeenCalled\u001b[39m()\n    \u001b[90m   | \u001b[39m                                                   \u001b[31m^\u001b[39m\n    \u001b[90m174| \u001b[39m      \u001b[34mexpect\u001b[39m(\u001b[35mtypeof\u001b[39m result)\u001b[33m.\u001b[39m\u001b[34mtoBe\u001b[39m(\u001b[32m'boolean'\u001b[39m)\n    \u001b[90m175| \u001b[39m    })\n\n\u001b[31m\u001b[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[11/20]⎯\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/test/services/pwaService.test.ts\u001b[2m > \u001b[22mPWAService\u001b[2m > \u001b[22mBackground Sync\u001b[2m > \u001b[22mshould request background sync\n\u001b[31m\u001b[1mAssertionError\u001b[22m: expected \"spy\" to be called with arguments: [ 'test-sync' ]\u001b[90m\n\nNumber of calls: \u001b[1m0\u001b[22m\n\u001b[31m\u001b[39m\n\u001b[36m \u001b[2m❯\u001b[22m src/test/services/pwaService.test.ts:\u001b[2m182:59\u001b[22m\u001b[39m\n    \u001b[90m180| \u001b[39m      \u001b[35mawait\u001b[39m pwaService\u001b[33m.\u001b[39m\u001b[34mrequestBackgroundSync\u001b[39m(\u001b[32m'test-sync'\u001b[39m)\n    \u001b[90m181| \u001b[39m      \n    \u001b[90m182| \u001b[39m      expect(mockServiceWorkerRegistration.sync.register).toHaveBeenCa…\n    \u001b[90m   | \u001b[39m                                                          \u001b[31m^\u001b[39m\n    \u001b[90m183| \u001b[39m    })\n    \u001b[90m184| \u001b[39m\n\n\u001b[31m\u001b[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[12/20]⎯\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/test/services/pwaService.test.ts\u001b[2m > \u001b[22mPWAService\u001b[2m > \u001b[22mPush Notifications\u001b[2m > \u001b[22mshould handle notification not supported\n\u001b[31m\u001b[1mTypeError\u001b[22m: Cannot delete property 'Notification' of #<Object>\u001b[39m\n\u001b[36m \u001b[2m❯\u001b[22m src/test/services/pwaService.test.ts:\u001b[2m207:7\u001b[22m\u001b[39m\n    \u001b[90m205| \u001b[39m    \u001b[34mit\u001b[39m(\u001b[32m'should handle notification not supported'\u001b[39m\u001b[33m,\u001b[39m \u001b[35masync\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[90m206| \u001b[39m      \u001b[90m// Remove Notification API\u001b[39m\n    \u001b[90m207| \u001b[39m      \u001b[35mdelete\u001b[39m (window \u001b[35mas\u001b[39m any)\u001b[33m.\u001b[39m\u001b[33mNotification\u001b[39m\n    \u001b[90m   | \u001b[39m      \u001b[31m^\u001b[39m\n    \u001b[90m208| \u001b[39m      \n    \u001b[90m209| \u001b[39m      const permission = await pwaService.requestNotificationPermissio…\n\n\u001b[31m\u001b[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[13/20]⎯\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/test/services/pwaService.test.ts\u001b[2m > \u001b[22mPWAService\u001b[2m > \u001b[22mPush Notifications\u001b[2m > \u001b[22mshould subscribe to push notifications\n\u001b[31m\u001b[1mAssertionError\u001b[22m: expected \"spy\" to be called at least once\u001b[39m\n\u001b[36m \u001b[2m❯\u001b[22m src/test/services/pwaService.test.ts:\u001b[2m220:67\u001b[22m\u001b[39m\n    \u001b[90m218| \u001b[39m      const subscription = await pwaService.subscribeToPushNotificatio…\n    \u001b[90m219| \u001b[39m      \n    \u001b[90m220| \u001b[39m      expect(mockServiceWorkerRegistration.pushManager.subscribe).toHa…\n    \u001b[90m   | \u001b[39m                                                                  \u001b[31m^\u001b[39m\n    \u001b[90m221| \u001b[39m      \u001b[34mexpect\u001b[39m(subscription)\u001b[33m.\u001b[39m\u001b[34mtoBeTruthy\u001b[39m()\n    \u001b[90m222| \u001b[39m    })\n\n\u001b[31m\u001b[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[14/20]⎯\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/test/services/pwaService.test.ts\u001b[2m > \u001b[22mPWAService\u001b[2m > \u001b[22mCache Management\u001b[2m > \u001b[22mshould handle cache not supported\n\u001b[31m\u001b[1mTypeError\u001b[22m: Cannot delete property 'caches' of #<Object>\u001b[39m\n\u001b[36m \u001b[2m❯\u001b[22m src/test/services/pwaService.test.ts:\u001b[2m254:7\u001b[22m\u001b[39m\n    \u001b[90m252| \u001b[39m    \u001b[34mit\u001b[39m(\u001b[32m'should handle cache not supported'\u001b[39m\u001b[33m,\u001b[39m \u001b[35masync\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[90m253| \u001b[39m      \u001b[90m// Remove caches API\u001b[39m\n    \u001b[90m254| \u001b[39m      \u001b[35mdelete\u001b[39m (window \u001b[35mas\u001b[39m any)\u001b[33m.\u001b[39mcaches\n    \u001b[90m   | \u001b[39m      \u001b[31m^\u001b[39m\n    \u001b[90m255| \u001b[39m      \n    \u001b[90m256| \u001b[39m      \u001b[35mawait\u001b[39m pwaService\u001b[33m.\u001b[39m\u001b[34mclearCache\u001b[39m()\n\n\u001b[31m\u001b[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[15/20]⎯\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/test/services/pwaService.test.ts\u001b[2m > \u001b[22mPWAService\u001b[2m > \u001b[22mNetwork Status\u001b[2m > \u001b[22mshould report online status\n\u001b[31m\u001b[1mTypeError\u001b[22m: Cannot redefine property: onLine\u001b[39m\n\u001b[36m \u001b[2m❯\u001b[22m src/test/services/pwaService.test.ts:\u001b[2m268:14\u001b[22m\u001b[39m\n    \u001b[90m266| \u001b[39m      \u001b[34mexpect\u001b[39m(pwaService\u001b[33m.\u001b[39m\u001b[34misOnline\u001b[39m())\u001b[33m.\u001b[39m\u001b[34mtoBe\u001b[39m(\u001b[35mtrue\u001b[39m)\n    \u001b[90m267| \u001b[39m      \n    \u001b[90m268| \u001b[39m      \u001b[33mObject\u001b[39m\u001b[33m.\u001b[39m\u001b[34mdefineProperty\u001b[39m(navigator\u001b[33m,\u001b[39m \u001b[32m'onLine'\u001b[39m\u001b[33m,\u001b[39m { value\u001b[33m:\u001b[39m \u001b[35mfalse\u001b[39m })\n    \u001b[90m   | \u001b[39m             \u001b[31m^\u001b[39m\n    \u001b[90m269| \u001b[39m      \u001b[34mexpect\u001b[39m(pwaService\u001b[33m.\u001b[39m\u001b[34misOnline\u001b[39m())\u001b[33m.\u001b[39m\u001b[34mtoBe\u001b[39m(\u001b[35mfalse\u001b[39m)\n    \u001b[90m270| \u001b[39m    })\n\n\u001b[31m\u001b[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[16/20]⎯\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/test/services/pwaService.test.ts\u001b[2m > \u001b[22mPWAService\u001b[2m > \u001b[22mNetwork Status\u001b[2m > \u001b[22mshould handle missing connection API\n\u001b[31m\u001b[1mTypeError\u001b[22m: Cannot delete property 'connection' of #<Navigator>\u001b[39m\n\u001b[36m \u001b[2m❯\u001b[22m src/test/services/pwaService.test.ts:\u001b[2m283:7\u001b[22m\u001b[39m\n    \u001b[90m281| \u001b[39m\n    \u001b[90m282| \u001b[39m    \u001b[34mit\u001b[39m(\u001b[32m'should handle missing connection API'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[90m283| \u001b[39m      \u001b[35mdelete\u001b[39m (navigator \u001b[35mas\u001b[39m any)\u001b[33m.\u001b[39mconnection\n    \u001b[90m   | \u001b[39m      \u001b[31m^\u001b[39m\n    \u001b[90m284| \u001b[39m      \n    \u001b[90m285| \u001b[39m      \u001b[34mexpect\u001b[39m(pwaService\u001b[33m.\u001b[39m\u001b[34mgetConnectionType\u001b[39m())\u001b[33m.\u001b[39m\u001b[34mtoBe\u001b[39m(\u001b[32m'unknown'\u001b[39m)\n\n\u001b[31m\u001b[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[17/20]⎯\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/test/services/pwaService.test.ts\u001b[2m > \u001b[22mPWAService\u001b[2m > \u001b[22mEvent System\u001b[2m > \u001b[22mshould handle errors in event callbacks gracefully\n\u001b[31m\u001b[1mError\u001b[22m: Callback error\u001b[39m\n\u001b[36m \u001b[2m❯\u001b[22m src/test/services/pwaService.test.ts:\u001b[2m305:15\u001b[22m\u001b[39m\n    \u001b[90m303| \u001b[39m    \u001b[34mit\u001b[39m(\u001b[32m'should handle errors in event callbacks gracefully'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[90m304| \u001b[39m      \u001b[35mconst\u001b[39m mockCallback \u001b[33m=\u001b[39m vi\u001b[33m.\u001b[39m\u001b[34mfn\u001b[39m()\u001b[33m.\u001b[39m\u001b[34mmockImplementation\u001b[39m(() \u001b[33m=>\u001b[39m {\n    \u001b[90m305| \u001b[39m        \u001b[35mthrow\u001b[39m \u001b[35mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m'Callback error'\u001b[39m)\n    \u001b[90m   | \u001b[39m              \u001b[31m^\u001b[39m\n    \u001b[90m306| \u001b[39m      })\n    \u001b[90m307| \u001b[39m      \n\u001b[90m \u001b[2m❯\u001b[22m src/services/pwaService.ts:\u001b[2m413:37\u001b[22m\u001b[39m\n\u001b[90m \u001b[2m❯\u001b[22m PWAService.emit src/services/pwaService.ts:\u001b[2m413:17\u001b[22m\u001b[39m\n\u001b[90m \u001b[2m❯\u001b[22m src/test/services/pwaService.test.ts:\u001b[2m314:15\u001b[22m\u001b[39m\n\n\u001b[31m\u001b[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[18/20]⎯\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/test/services/realTimeSyncService.test.ts\u001b[2m > \u001b[22mRealTimeSyncService\u001b[2m > \u001b[22mSync Operations\u001b[2m > \u001b[22mshould sync cart updates\n\u001b[31m\u001b[1mAssertionError\u001b[22m: expected \"send\" to be called at least once\u001b[39m\n\u001b[36m \u001b[2m❯\u001b[22m src/test/services/realTimeSyncService.test.ts:\u001b[2m123:24\u001b[22m\u001b[39m\n    \u001b[90m121| \u001b[39m      \u001b[35mawait\u001b[39m realTimeSyncService\u001b[33m.\u001b[39m\u001b[34msyncCartUpdate\u001b[39m(cartItems\u001b[33m,\u001b[39m \u001b[32m'user123'\u001b[39m)\n    \u001b[90m122| \u001b[39m      \n    \u001b[90m123| \u001b[39m      \u001b[34mexpect\u001b[39m(mockSend)\u001b[33m.\u001b[39m\u001b[34mtoHaveBeenCalled\u001b[39m()\n    \u001b[90m   | \u001b[39m                       \u001b[31m^\u001b[39m\n    \u001b[90m124| \u001b[39m      \u001b[35mconst\u001b[39m sentData \u001b[33m=\u001b[39m \u001b[33mJSON\u001b[39m\u001b[33m.\u001b[39m\u001b[34mparse\u001b[39m(mockSend\u001b[33m.\u001b[39mmock\u001b[33m.\u001b[39mcalls[\u001b[34m0\u001b[39m][\u001b[34m0\u001b[39m])\n    \u001b[90m125| \u001b[39m      \u001b[34mexpect\u001b[39m(sentData\u001b[33m.\u001b[39mtype)\u001b[33m.\u001b[39m\u001b[34mtoBe\u001b[39m(\u001b[32m'cart'\u001b[39m)\n\n\u001b[31m\u001b[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[19/20]⎯\u001b[22m\u001b[39m\n\n\u001b[41m\u001b[1m FAIL \u001b[22m\u001b[49m src/test/services/realTimeSyncService.test.ts\u001b[2m > \u001b[22mRealTimeSyncService\u001b[2m > \u001b[22mSync Operations\u001b[2m > \u001b[22mshould sync route generation\n\u001b[31m\u001b[1mAssertionError\u001b[22m: expected \"send\" to be called at least once\u001b[39m\n\u001b[36m \u001b[2m❯\u001b[22m src/test/services/realTimeSyncService.test.ts:\u001b[2m143:24\u001b[22m\u001b[39m\n    \u001b[90m141| \u001b[39m      await realTimeSyncService.syncRouteGenerated(route, 'user123', '…\n    \u001b[90m142| \u001b[39m      \n    \u001b[90m143| \u001b[39m      \u001b[34mexpect\u001b[39m(mockSend)\u001b[33m.\u001b[39m\u001b[34mtoHaveBeenCalled\u001b[39m()\n    \u001b[90m   | \u001b[39m                       \u001b[31m^\u001b[39m\n    \u001b[90m144| \u001b[39m      \u001b[35mconst\u001b[39m sentData \u001b[33m=\u001b[39m \u001b[33mJSON\u001b[39m\u001b[33m.\u001b[39m\u001b[34mparse\u001b[39m(mockSend\u001b[33m.\u001b[39mmock\u001b[33m.\u001b[39mcalls[\u001b[34m0\u001b[39m][\u001b[34m0\u001b[39m])\n    \u001b[90m145| \u001b[39m      \u001b[34mexpect\u001b[39m(sentData\u001b[33m.\u001b[39mtype)\u001b[33m.\u001b[39m\u001b[34mtoBe\u001b[39m(\u001b[32m'route'\u001b[39m)\n\n\u001b[31m\u001b[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[20/20]⎯\u001b[22m\u001b[39m\n\n\u001b[31m⎯⎯⎯⎯⎯⎯\u001b[39m\u001b[1m\u001b[41m Unhandled Errors \u001b[49m\u001b[22m\u001b[31m⎯⎯⎯⎯⎯⎯\u001b[39m\n\u001b[31m\u001b[1m\nVitest caught 1 unhandled error during the test run.\nThis might cause false positive tests. Resolve unhandled errors to make sure your tests are not affected.\u001b[22m\u001b[39m\n\n\u001b[31m⎯⎯⎯⎯⎯\u001b[39m\u001b[1m\u001b[41m Uncaught Exception \u001b[49m\u001b[22m\u001b[31m⎯⎯⎯⎯⎯\u001b[39m\n\u001b[31m\u001b[1mAssertionError\u001b[22m: expected \"spy\" to be called at least once\u001b[39m\n\u001b[90m \u001b[2m❯\u001b[22m Proxy.<anonymous> node_modules/@vitest/expect/dist/index.js:\u001b[2m1335:10\u001b[22m\u001b[39m\n\u001b[90m \u001b[2m❯\u001b[22m Proxy.<anonymous> node_modules/@vitest/expect/dist/index.js:\u001b[2m1029:14\u001b[22m\u001b[39m\n\u001b[90m \u001b[2m❯\u001b[22m Proxy.methodWrapper node_modules/chai/chai.js:\u001b[2m1706:25\u001b[22m\u001b[39m\n\u001b[36m \u001b[2m❯\u001b[22m Timeout._onTimeout src/test/services/realTimeSyncService.test.ts:\u001b[2m91:30\u001b[22m\u001b[39m\n    \u001b[90m 89| \u001b[39m      \u001b[90m// Wait for connection event\u001b[39m\n    \u001b[90m 90| \u001b[39m      \u001b[34msetTimeout\u001b[39m(() \u001b[33m=>\u001b[39m {\n    \u001b[90m 91| \u001b[39m        \u001b[34mexpect\u001b[39m(mockCallback)\u001b[33m.\u001b[39m\u001b[34mtoHaveBeenCalled\u001b[39m()\n    \u001b[90m   | \u001b[39m                             \u001b[31m^\u001b[39m\n    \u001b[90m 92| \u001b[39m      }\u001b[33m,\u001b[39m \u001b[34m50\u001b[39m)\n    \u001b[90m 93| \u001b[39m    })\n\u001b[90m \u001b[2m❯\u001b[22m listOnTimeout node:internal/timers:\u001b[2m588:17\u001b[22m\u001b[39m\n\u001b[90m \u001b[2m❯\u001b[22m processTimers node:internal/timers:\u001b[2m523:7\u001b[22m\u001b[39m\n\n\u001b[31mThis error originated in \"\u001b[1msrc/test/services/realTimeSyncService.test.ts\u001b[22m\" test file. It doesn't mean the error was thrown inside the file itself, but while it was running.\u001b[39m\n\u001b[31mThe latest test that might've caused the error is \"\u001b[1mshould sync route generation\u001b[22m\". It might mean one of the following:\n- The error was thrown, while Vitest was running this test.\n- If the error occurred after the test had been completed, this was the last documented test before it was thrown.\u001b[39m\n\u001b[31m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯\u001b[39m\n\n"
    },
    {
      "name": "Type Checking",
      "totalTests": 1,
      "passedTests": 1,
      "failedTests": 0,
      "duration": 534,
      "success": true,
      "error": null
    },
    {
      "name": "Code Linting",
      "totalTests": 1,
      "passedTests": 0,
      "failedTests": 1,
      "success": false,
      "error": "Command failed: npm run lint"
    },
    {
      "name": "Build Test",
      "totalTests": 1,
      "passedTests": 1,
      "failedTests": 0,
      "duration": 6600,
      "success": true,
      "error": null
    }
  ],
  "totalTests": 3,
  "passedTests": 2,
  "failedTests": 2,
  "coverage": null,
  "performance": null,
  "e2e": {
    "success": false,
    "error": "Command failed: npm run test:e2e:critical\nReferenceError: require is not defined in ES module scope, you can use import instead\n    at file:///C:/Users/David/Apps/Quick-Shop/playwright.config.ts:171:16\n    at ModuleJob.run (node:internal/modules/esm/module_job:274:25)\n    at onImport.tracePromise.__proto__ (node:internal/modules/esm/loader:644:26)\n    at requireOrImport (C:\\Users\\David\\Apps\\Quick-Shop\\node_modules\\playwright\\lib\\transform\\transform.js:214:12)\n    at loadUserConfig (C:\\Users\\David\\Apps\\Quick-Shop\\node_modules\\playwright\\lib\\common\\configLoader.js:106:46)\n    at loadConfig (C:\\Users\\David\\Apps\\Quick-Shop\\node_modules\\playwright\\lib\\common\\configLoader.js:118:22)\n    at loadConfigFromFile (C:\\Users\\David\\Apps\\Quick-Shop\\node_modules\\playwright\\lib\\common\\configLoader.js:330:10)\n    at runTests (C:\\Users\\David\\Apps\\Quick-Shop\\node_modules\\playwright\\lib\\program.js:166:18)\n    at i.<anonymous> (C:\\Users\\David\\Apps\\Quick-Shop\\node_modules\\playwright\\lib\\program.js:65:7)\n",
    "output": "\n> cartpilot@1.0.1 test:e2e:critical\n> npx playwright test tests/e2e/01-user-onboarding.e2e.ts tests/e2e/02-store-search-selection.e2e.ts tests/e2e/05-shopping-cart.e2e.ts\n\n"
  },
  "visual": null,
  "endTime": "2025-08-08T21:15:14.072Z",
  "totalDuration": 7134
}